<project name="executable" basedir="." default="all">
   
    <!-- Library containing $opencms/WEB-INF/lib -->
    <property name="lib.dir"     value="./lib"/>
 
    <!-- More very helpful declarations used within this script,
	 Change these if you want another file structure -->
    <property name="src.dir"     value="./src"/>
    <property name="class.dir"   value="./classes"/>
    <property name="javadoc.dir" value="./javadoc"/>
    <property name="jar.dir"     value="./bin"/>
    <property name="conf.dir"     value="./conf"/>
    <property name="debuglevel"  value="lines,vars,source" />

       
    <!-- Set Classpath equal to $opencms/WEB-INF/lib to simulate opencms behaviour -->
    <path id="classpath">
        <fileset dir="${lib.dir}" includes="**/*.jar"/>
    </path>
  
    <!-- Delete all .class files -->
    <target name="clean" description="Clean the project">
        <delete dir="${class.dir}"/>
    </target>

    <!-- Clean everything autogenerated  -->
    <target name="clean-jar" description="Clean the project + jar files">
        <delete dir="${jar.dir}"/>
        <delete dir="${class.dir}"/>
    </target>

    <!--Compile the module  -->
    <target name="compile" depends="clean-jar" description="Compiles the whole bundle">
        <mkdir dir="${class.dir}"/>
        <javac srcdir="${src.dir}" destdir="${class.dir}" classpathref="classpath">
	   <compilerarg line="-g:${debuglevel}"/> 
	</javac>
    </target>

    <!--Make a jar file  -->
    <target name="jar" depends="compile"  description="Jar the project"> 
        <mkdir dir="${jar.dir}"/>
	<mkdir dir="${class.dir}/xsl-fo/"/>
	<copy todir="${class.dir}">
	  <fileset dir="${conf.dir}"/>
	</copy>
	<copy todir="${class.dir}/xsl-fo/">
	  <fileset dir="./xsl-fo/"/>
	</copy>
        <jar destfile="${jar.dir}/${ant.project.name}.jar" basedir="${class.dir}">
	  <manifest>
	    <attribute name="Main-Class" value="dk.kb.dis.cumulusdatajobs.pdf.ToPdfProcessor" />
	  </manifest>
        </jar>
    </target>

    <!-- Clean, compile, jar -->
    <target name="all" depends="jar" description="clean all, compile and make a jar file"/>

</project>
